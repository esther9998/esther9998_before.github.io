1. [Parallel Tranking 병렬트랙킹](http://esther9998.github.io/transDoc)
2. [Parallel Tranking 병렬트랙킹](http://esther9998.github.io/transDoc)
3. [Parallel Tranking 병렬트랙킹](http://esther9998.github.io/transDoc)

1. parallel -  클릭후에 닫아도, 클릭수가 카운트됨.
	2. per-click IDs - 클릭 했을때, url에 파라미터 붙여서 보내준다. 왜냐면 병렬 트랙킹은 트랙킹서버로 가기때문에 해당 id데이터를 final 에 보낼수 없기 때문이다. 

https://developers.google.com/adwords/api/docs/guides/click-trackingGoogle 광고는 광고주에게 광고가 게재 된 횟수 및 광고 클릭 수와 같은 정보를 광고주에게 제공합니다. 추가 설정을 통해 Google 광고는 광고 노출 또는 클릭과 같은 전환 측정 항목을 제공 할 수 있습니다. 클릭 추적 URL 매개 변수를 통해 타사 분석 시스템에 대한 정보를 제공 할 수도 있습니다.
오늘날의 트랙킹 방식
Google 광고 클릭 추적을 사용하는 경우 광고 유형 및 네트워크에 따라 finalUrls, finalMobileUrls 또는 finalAppUrls 필드에 방문 페이지 URL을 지정합니다. 사용자가 광고를 클릭하면 바로 방문 페이지 URL로 이동합니다.

사용자 지정 클릭 추적 (예 : 타사 클릭 측정 시스템)을 사용하는 경우 추적 서버 URL을 지정하려면 trackingUrlTemplate 필드도 필요합니다. 게재시 Google 광고는 방문 페이지 URL을 만들어 클릭이 사용자를 추적 서버로 이동시킨 다음 사용자를 방문 페이지로 리디렉션합니다.


병렬 추적
병렬 추적은 맞춤 클릭 추적을 구현할 때 추적 요청을 처리하는 새로운 방법입니다. 백그라운드에서 추적을 수행하여 최종 목적지까지 사용자를 가속화하기 위해 새로운 sendBeacon 브라우저 기능을 이용합니다. 이렇게하면 사용자가 광고를 클릭했지만 방문 페이지가 보이지 않아서 추적 URL에서 리디렉션이 완료되기 전에 이탈 한 방문수를 줄일 수 있습니다.

2018 년 5 월부터 병렬 추적은 선택 사항이며 Android의 Chrome 브라우저에서 검색 및 쇼핑 캠페인에 대해서만 작동합니다. 그 해 말에 평행 추적 만 이용할 수있는 유일한 방법이 될 것입니다. 앞으로 몇 개월 동안 추가 캠페인 유형 및 브라우저를 지원할 예정입니다. 다른 사용자가 아직 병렬 추적을 지원하지 않는 브라우저에서 광고를 보는 경우 Google 광고는 순차 추적으로 되돌아갑니다.

병렬 추적의 경우 탐색 경험은 다음과 같습니다.

병렬 추적을위한 기술적 요구 사항 
병렬 추적을 사용하려면 몇 가지 기술적 요구 사항을 충족해야합니다. 추적 및보고를 위해 현재 시스템을 설정하는 방법에 따라 이러한 항목 중 하나 이상이 영향을받을 수 있습니다. 
리디렉션 
병렬 추적은 서버 수준 리디렉션 만 지원합니다. 또한 추적 리디렉션 체인의 모든 URL은 HTTPS를 지원해야합니다. 
순차적 추적는 HTTP , 자바 스크립트, HTML과 같은 페이지상의 리디렉션이 발생하면 이전 URL에서 종료됩니다. 추적은 백그라운드에서 발생하므로 사용자 환경에 아무런 영향을주지 않지만 호출되지 않은 추적기는 클릭 추적 정보를받지 못합니다. 

병렬 추적이 올바르게 작동하는지 확인하려면 다음을 수행하십시오. 

	1. 
추적 서버가 HTTPS 프로토콜을 사용하고 내부에서 설정 한 리디렉션이 HTTPS를 사용하는지 확인하십시오. 
	2. 
자바 스크립트 리디렉션과 같이 페이지상의 메소드를 사용하는 모든 리디렉션 메커니즘은 작동하지 않습니다. 추적 리디렉션 체인에서 이러한 리디렉션 메커니즘을 사용하는 경우이를 변경해야합니다.





자동 HTTP 재 작성
이후 리디렉션을 제어 할 수는 없지만 Google 광고는 첫 번째 추적 호출이 항상 입력되지 않으면 HTTPS로 다시 작성합니다. 최종 도착 URL은 HTTP 또는 HTTPS를 사용할 수 있습니다. 
어째꺼나, Google Adwards로들어오는 URL들을 HTTPS로 전환 할수있도록, 서버에 설정되어 있는지 확인하십시오.

예를 들어 추적 URL이 tracker.example.com 인 경우 http://tracker.example.com 및 https://tracker.example.com에 모두 응답해야합니다.

클릭당 (per-click) ID
일부 추적 서버는 방문 페이지로 리디렉션 할 때 클릭당 (click-per-click) ID를 포함하므로 다양한 측정에 참여하기 위해 웹 사이트에서 매개 변수를 읽고 저장할 수 있습니다. 추적 서버 호출이 웹 사이트로 전달되지 않기 때문에 병렬 추적에서는이 작업을 수행 할 수 없습니다.

이 문제를 해결하려면 고객 계정에서 자동 태그 추가를 사용하도록 설정할 수 있습니다. 자동 태그 추가 기능을 사용하면 게재 시간 동안 Google 클릭 식별자 (GCLID) 매개 변수가 방문 페이지 URL 및 추적 템플릿 URL의 끝에 추가됩니다. 이렇게하면 페이지 태그 (예 : Google 웹 로그 분석)와 추적 서버가 처리 할 수 있습니다. 이 매개 변수는 교통 정보를 결합하는 공통 키로 사용할 수 있습니다.

자동 태그 추가 외에도 새로운 {gclid} ValueTrack 매개 변수가 출시되었습니다. 현재 고유 식별자를 삽입하는 데 사용하는 매개 변수가있는 경우 대신 {gclid}를 값으로 사용하여 웹 사이트에 필요한 변경 사항을 잠재적으로 줄일 수 있습니다. 예를 들어 Google 광고의 최종 도착 URL 또는 추적 템플릿에 partner_Id = [동적 생성 클릭 ID]와 같은 것이 있으면 partner_id = {gclid}로 업데이트 할 수 있습니다.

URL 재구성
게재시 {lpurl} ValueTrack 매개 변수에 첨부 된 매개 변수와 추적 템플릿 입력란의 변형은 인코딩 규칙을 기반으로 구문 분석되고 방문 페이지 호출에 추가됩니다. 또한 병행 추적을 적용하면 추적 호출의 {lpurl} 매개 변수가 대체 URL (예 : https://google.com/asnc/dGVzdA)으로 바뀝니다. 또한 방문 페이지로 이동하는 모든 매개 변수가이 google.com URL에 추가됩니다.

{lpurl} 대신 Google 대체 URL을 사용하면 웹 페이지가 두 번 핑되지 않습니다 (사용자 클릭에서 한 번, 평행 추적 리디렉션에서 한 번). 추적기는 {lpurl} ValueTrack 매개 변수를 정상적으로 처리하는 것처럼 대체 URL로 계속 리디렉션해야합니다. Google 대체 URL은 리디렉션시 HTTP 상태 코드 204를 반환합니다.

다음 예제를 고려하십시오.
Google Ads setup
Final URL
http://mywebsite.com?something=foo
Tracking template
https://redirect.com?url={lpurl}%3Flpvar%3Dabc&src=google
Calls where parallel tracking is supported
Navigation
http://mywebsite.com?something=foo&lpvar=abc
Parallel tracker call
https://redirect.com?url=https%3A%2F%2Fgoogle.com%2Fasnc%2FdGVzdA%3Fsomething%3Dfoo%26pvar%3Dxyz
Calls where parallel tracking is not supported
Browser call
https://redirect.com?url=http%3A%2F%2Fmywebsite.com%3Fsomething%3Dfoo%3Flpvar%3Dabc&src=google
--> Sequential hop
http://mywebsite.com?something=foo&lpvar=abc

도시 된 바와 같이, 평행 한 트래킹이 적용될 때 :


	1. 
lpvar = abc 매개 변수가 구문 분석되어 방문 페이지 URL에 추가됩니다.
	2. 
추적기 호출의 {lpurl} 매개 변수는 대체 URL로 바뀝니다.
	3. 
대체 URL에는 추적 서버가 필요에 따라 처리 할 수 있도록 방문 페이지로 전송 된 모든 매개 변수가 포함됩니다.



방문 페이지 매개 변수
Google 광고로부터 최종 도착한 URL을 검색하여 사용자 클릭에 대한 응답으로 브라우저에 직접로드하므로 
클릭 추적 리디렉션 도중에는 클릭 추적 광고가 방문 페이지 URL 매개 변수를 추가하거나 수정할 수 없습니다. 
이러한 매개 변수는 finalUrlSuffix 필드에 직접 입력해야합니다.

이 매개 변수는 trackingUrlTemplate이 지원되는 모든 엔터티에서 지원됩니다. 
이 입력란에 입력 된 문자열은 Google 대체 URL과 함께 방문 페이지 호출에 추가됩니다. 
이렇게하면 추적 서버가 필요에 따라 이러한 매개 변수를 처리 할 수 있습니다. 
이 입력란은 추적 URL 템플릿 입력란과 유사한 추적 매개 변수 (맞춤 및 ValueTrack)를 허용합니다.


쿠키 컨텍스트
순차 추적의 경우 브라우저 쿠키는 추적 프로그램 도메인의 제 1 자 컨텍스트에 설정됩니다. 
Beacon 기능을 사용하면 쿠키가 타사 삼자 컨텍스트의 기본 브라우저 jar에 기록됩니다. 
서비스가 제 1 자 컨텍스트로 작성된 쿠키에 의존하는 경우 필요에 따라 변경하십시오.

병렬 추적 사용
v201802부터 고객의 parallelTrackingEnabled 필드를 true로 설정하여 병렬 추적을 선택할 수 있습니다. 앞으로는 병렬 추적이 Google 광고에서 지원하는 유일한 추적 양식이 될 것이며이 필드는 일몰이 될 것입니다.

문제 해결 도구
다음 도구는 병렬 추적 설정 문제를 해결하는 데 도움이 될 수 있습니다.

향상된 미리보기 광고 클릭 도구
Google 광고 UI (테스트 버튼)의 추적 템플릿 옆에있는 미리보기 기능이 다음 URL을 표시하도록 향상되었습니다.


	* 
병렬 추적을 사용할 수있는 경우
	* 
브라우저에로드 될 방문 페이지 URL
	* 
배경에로드 될 추적 URL
	* 
병렬 추적을 사용할 수없는 경우 :
	* 
브라우저에로드 될 추적 URL (순차 추적)


이 URL을 검토하여 매개 변수가 의도 한대로 방문 페이지 및 추적기로 전송되는지 확인할 수 있습니다. 이 도구의 즉시 확인에는 병렬 추적 요구 사항과 관련된 특정 오류 (예 : https : // 요구 사항)가 표시되지 않습니다.

평행 추적 표시기
병렬 추적 옵션을 사용하여 추적 URL이 호출되면 Google 광고는 gb = 1 매개 변수를 URL에 추가합니다. 이 매개 변수를 사용하여 추적 솔루션에서 병렬 추적 호출을 식별 할 수 있습니다.

개별 캠페인 테스트
병렬 추적을 위해 전체 계정을 선택하지 않고 개별 캠페인을 테스트 할 수 있습니다. 따라서 제한된 용량으로 엔드 투 엔드 테스트를 수행 할 수 있습니다. 특정 캠페인에 대해 병렬 추적을 사용하려면 아래 단계를 따르십시오.

원하는 캠페인의 설정 페이지로 이동하십시오.

캠페인 URL 옵션 설정 (추가 설정을 확장해야 할 수도 있음)에서 {_beacon}이라는 맞춤 매개 변수를 만들고 값을 true로 지정하십시오.

URL에서이 맞춤 매개 변수를 사용할 필요는 없습니다.

Google에서이 매개 변수를 찾으면 해당 캠페인 아래의 모든 클릭이 병렬 추적 처리됩니다.

추적 호출에서 & gb = 1을 (브라우저에서 백그라운드 호출을 나타내는) 찾아서 병렬 추적이 사용되는지 확인하십시오.

참고 :이 방법은 특정 광고 그룹 또는 광고에도 적용됩니다.
또한 테스트를 위해이 링크를 사용하여 Google 검색을 시작하여 모든 브라우저 (아직 지원을 알리지 않은 브라우저 포함)에 대해 강제로 추적 할 수 있습니다. 이는 병렬 추적을 선택하지 않은 계정 또는 캠페인의 광고 클릭에 대해서도 적용됩니다.


병렬 추적 설정을위한 구현 점검 목록
병렬 추적으로 마이그레이션하는 데 도움이되는 구현 체크리스트를 작성했습니다.


	1. 
HTTPS 지원 : 추적 서버는 HTTPS 프로토콜을 지원하도록 구성됩니다.
	2. 
[권장] Google 광고의 HTTPS 입력 : Google 광고의 추적 템플릿 URL은 https : //로 시작합니다. 이전을 돕기 위해 Google 광고는 첫 번째 추적 호출을 항상 입력하지 않으면 HTTPS로 다시 작성합니다.
	3. 
서버 측 리디렉션 : 리디렉션 추적은 서버 측 리디렉션을 사용합니다 (자바 스크립트와 같은 페이지 리디렉션과 반대 됨).
	4. 
[선택 사항] 옵트 인용 API 통합 : 고객은 애드워즈 API를 사용하여 플랫폼을 통한 병렬 추적을 선택할 수 있습니다.
	5. 
[선택 사항] 최종 URL 접미사 필드 용 API 통합 : 고객은 애드워즈 API를 사용하여 플랫폼에서 최종 URL 접미사 필드를 설정할 수 있습니다.
	6. 
[해당하는 경우] 방문 페이지 매개 변수 : 클릭 리디렉션 중 방문 페이지로 전송 된 변수가 Google 광고의 최종 도착 URL 또는 최종 도착 URL 필드 (권장) 또는 추적 템플릿 입력란 (선호하지 않음)에 입력되었습니다. 
	7. 
[선택 사항] 클릭 식별자 (gclid) 추적 : Google 광고 계정 설정 또는 API를 통해 자동 태그 추가 기능을 사용하여 Google의 고유 한 클릭 식별자 ( 'gclid')를 방문 페이지 및 추적 URL에 추가하고 추적 관련 변경 보고. {gclid} ValueTrack 매개 변수를 사용하여 클릭 식별자 매개 변수 값을 Google의 클릭 식별자 (gclid)로 대체하고 추적 및보고와 관련된 변경 사항을 적용합니다. 
	8. 
병렬 추적 표시기 : 추적기는 후속 추적기로 리디렉션 할 때 병렬 추적 표시기 "gb = 1"을 전달합니다.
	9. 
[우수 사례] 테스트 추적 설정 : Google 광고 UI에서 테스트를 통해 모든 URL이 올바르게 렌더링되고 있는지 확인했습니다. 
	10. 
[우수 사례] 철저한 테스트 : 광고주 계정을 마이그레이션하기 전에 소규모 운영 계정 중 하나 이상에 대한 병렬 추적을 설정하여 종단 간 테스트를 완료합니다.

